const { MongoClient } = require("mongodb"); // imports Mongo

async function main() {
  const uri = "INSERT MONOG URI HERE"; // url of the MongoDB atlas DB and auth

  const client = new MongoClient(uri); // invokes mongo as client

  try {
    await client.connect();
    await createListing(client, {
      // this adds a single item to the database in the airbnb collection
      // invokes the createlisting function sending the info to DB
      name: "A house",
      summary: "Test",
      bedrooms: 1,
      bathrooms: 2,
      // id is auto generated by MongoDB
    });
  } catch (e) {
    // error block
    console.log(e);
  } finally {
    await client.close(); // close client connected after operations completed
  }
}
main().catch(console.error);

async function createListing(client, newListing) {
  const results = await client
    .db("sample_airbnb") // name of the db
    .collection("listingAndReviews") // collection or table in sql terms
    .insertOne(newListing); // insert is a method on the db connection

  console.log(`New listing created with the ID ${results.insertedId}`);
}
